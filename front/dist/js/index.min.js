function Banner(){this.bannerWidth=1320,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-1320*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){console.log("sss"),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".nav-top").children().click(function(){var r=$(this),o=r.attr("data-category");shoppingweb_ajax.get({url:"/product/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("products-item",{productses:t}),i=$("#product-list");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){shoppingweb_ajax.get({url:"/product/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("products-item",{productses:t});$("#product-list").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJzaG9wcGluZ3dlYl9hamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwicHJvZHVjdHNlcyIsInRwbCIsInRlbXBsYXRlIiwibmV3c0xpc3RHcm91cCIsImVtcHR5IiwibGlzdGVuTG9hZE1vcmVFdmVudCJdLCJtYXBwaW5ncyI6IkFBZUEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxLQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1BQVEsRUFDYkosS0FBS0ssVUFBWUYs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Q1BDLEtBQU8sQ0FDSEMsRUFBS2hELEVBQUtDLEtBQ1ZDLFlBQWVGLEVBQUtFLGFBRXhCK0MsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQWFELEVBQWEsS0FDOUIsR0FBdUIsRUFBcEJDLEVBQVd0RCxPQUFXLENBQ3JCLElBQUl1RCxFQUFNQyxTQUFTLGdCQUFnQixDQUFDRixXQUFhQSxJQUN4QzlELEVBQUUsaUJBQ1JxQixPQUFPMEMsR0FDVnBELEVBQUtDLE1BQVEsT0FFYkUsRUFBUW1CLGNBVWhDdkIsTUFBTUssVUFBVWtDLElBQU0sV0FDUHBELEtBQ05zRSxzQkFETXRFLEtBRU51RCw2QkFZVHBELEVBQUUsWUFDZSxJQUFJSixRQUNWcUQsT0FFSyxJQUFJdkMsT0FDVnVDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOmdouWQkeWvueixoVxuXG4vLyBmdW5jdGlvbiBCYW5uZXIoKSB7XG4vLyAgICAgY29uc29sZS5sb2coJ+aehOmAoOWHveaVsCcpO1xuLy8gICAgIHRoaXMucGVyc29uID0gJ3VzZXIxJztcbi8vIH1cbi8vXG4vLyBCYW5uZXIucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24gKCkge1xuLy8gICAgIGNvbnNvbGUubG9nKCdoZWxsbyB3b3JsZCcpO1xuLy8gfTtcbi8vXG4vLyB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuLy8gY29uc29sZS5sb2coYmFubmVyLnBlcnNvbik7XG4vLyBiYW5uZXIuZ3JlZXQoKTtcblxuZnVuY3Rpb24gQmFubmVyKCkge1xuICAgIHRoaXMuYmFubmVyV2lkdGggPSAxMzIwO1xuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xuICAgIHRoaXMuYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcbn1cblxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xuICAgIHZhciBsYXN0QmFubmVyID0gc2VsZi5saUxpc3QuZXEoc2VsZi5iYW5uZXJDb3VudC0xKS5jbG9uZSgpO1xuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lcldpZHRoKihzZWxmLmJhbm5lckNvdW50KzIpLCdsZWZ0Jzotc2VsZi5iYW5uZXJXaWR0aH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZvcih2YXIgaT0wOyBpPHNlbGYuYmFubmVyQ291bnQ7IGkrKyl7XG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xuICAgICAgICBzZWxmLnBhZ2VDb250cm9sLmFwcGVuZChjaXJjbGUpO1xuICAgICAgICBpZihpID09PSAwKXtcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZihpc1Nob3cpe1xuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XG4gICAgfWVsc2V7XG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcbiAgICB9XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOi0xMzIwKnNlbGYuaW5kZXh9LDUwMCk7XG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcbiAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudC0xO1xuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgfWVsc2V7XG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQrMSl7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9LDIwMDApO1xufTtcblxuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoc2VsZi5pbmRleCA9PT0gMCl7XG4gICAgICAgICAgICAvLyA9Pe+8mjEgPT0gJzEn77yadHJ1ZVxuICAgICAgICAgICAgLy8gPT09PSAxICE9ICcxJ1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lckNvdW50KnNlbGYuYmFubmVyV2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG5cbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSl7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyDnrKzkuIDkuKrlh73mlbDmmK/vvIzmiorpvKDmoIfnp7vliqjliLBiYW5uZXLkuIrkvJrmiafooYznmoTlh73mlbBcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcbiAgICB9LGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g56ys5LqM5Liq5Ye95pWw5piv77yM5oqK6byg5qCH5LuOYmFubmVy5LiK56e76LWw5Lya5omn6KGM55qE5Ye95pWwXG4gICAgICAgIHNlbGYubG9vcCgpO1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcbiAgICB9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxvYmopIHtcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5cbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKFwic3NzXCIpO1xuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XG4gICAgdGhpcy5sb29wKCk7XG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xuICAgIHRoaXMubGlzdGVuUGFnZUNvbnRyb2woKTtcbn07XG5cbi8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdGFiR3JvdXAgPSAkKFwiLm5hdi10b3BcIik7XG4gICAgdGFiR3JvdXAuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xuICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgIHNob3BwaW5nd2ViX2FqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL3Byb2R1Y3QvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWQsXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcInByb2R1Y3RzLWl0ZW1cIix7XCJwcm9kdWN0c2VzXCI6cHJvZHVjdHNlc30pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIjcHJvZHVjdC1saXN0XCIpO1xuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5cbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcbiAgICBsb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2hvcHBpbmd3ZWJfYWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvcHJvZHVjdC9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICdwJzogc2VsZi5wYWdlLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzZXMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYocHJvZHVjdHNlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcInByb2R1Y3RzLWl0ZW1cIix7XCJwcm9kdWN0c2VzXCI6cHJvZHVjdHNlc30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIiNwcm9kdWN0LWxpc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcbn07XG5cbmZ1bmN0aW9uIEluZGV4KCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2UgPSAyO1xuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xuICAgIHNlbGYubG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcblxufVxuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XG4gICAgYmFubmVyLnJ1bigpO1xuXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XG4gICAgaW5kZXgucnVuKCk7XG59KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIl19

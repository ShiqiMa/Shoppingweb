function Banner(){this.bannerWidth=1320,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}function Shoppingcart(){}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-1320*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){console.log("sss"),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".nav-top").children().click(function(){var r=$(this),o=r.attr("data-category");shoppingweb_ajax.get({url:"/product/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("products-item",{productses:t}),i=$("#product-list");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){shoppingweb_ajax.get({url:"/product/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("products-item",{productses:t});$("#product-list").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},Shoppingcart.prototype.addProduct=function(){var n=$("#add-item-btn"),i=$(".product-name"),r=$(".price");n.click(function(){shoppingweb_ajax.get({url:"/product/shoppingcart_list/",data:{name:i,price:r},success:function(n){if(200===n.code){n.data;var t=$(".sp-name"),e=$(".sp-price");t.text=i,e.text=r}}})})},Shoppingcart.prototype.run=function(){this.addProduct()},$(function(){(new Banner).run(),(new Index).run(),(new Shoppingcart).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsIlNob3BwaW5nY2FydCIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJzaG9wcGluZ3dlYl9hamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwicHJvZHVjdHNlcyIsInRwbCIsInRlbXBsYXRlIiwibmV3c0xpc3RHcm91cCIsImVtcHR5IiwibGlzdGVuTG9hZE1vcmVFdmVudCIsImFkZFByb2R1Y3QiLCJhZGRCdG4iLCJuYW1lIiwicHJpY2UiLCJzcF9uYW1lIiwic3BfcHJpY2UiLCJ0ZXh0Il0sIm1hcHBpbmdzIjoiQUFlQSxTQUFT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QXNCLFdBQ2xDLElBQUl6RCxFQUFPZCxLQUNQaUIsRUFBVWQsRUFBRSxrQkFDaEJjLEVBQVE2QixNQUFNLFdBQ1ZhLGlCQUFpQkMsSUFBSSxDQUNqQkMsSUFBTyxpQkFDUEMsS0FBTyxDQUNIQyxFQUFLakQsRUFBS0MsS0FDVkMsWUFBZUYsRUFBS0UsYUFFeEJnRCxRQUFXLFNBQVVDLEdBQ2pCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSUMsRUFBYUQsRUFBYSxLQUM5QixHQUF1QixFQUFwQkMsRUFBV3ZELE9BQVcsQ0FDckIsSUFBSXdELEVBQU1DLFNBQVMsZ0JBQWdCLENBQUNGLFdBQWFBLElBQ3hDL0QsRUFBRSxpQkFDUnNCLE9BQU8wQyxHQUNWckQsRUFBS0MsTUFBUSxPQUViRSxFQUFRb0IsY0FVaEN4QixNQUFNTSxVQUFVa0MsSUFBTSxXQUNQckQsS0FDTnVFLHNCQURNdkUsS0FFTndELDZCQWNUdEMsYUFBYUMsVUFBVXFELFdBQWEsV0FDaEMsSUFBSUMsRUFBU3RFLEVBQUUsaUJBQ1h1RSxFQUFPdkUsRUFBRSxpQkFDVHdFLEVBQVF4RSxFQUFFLFVBQ2RzRSxFQUFPM0IsTUFBTSxXQUNUYSxpQkFBaUJDLElBQUksQ0FDakJDLElBQU8sOEJBQ1BDLEtBQVEsQ0FDSlksS0FBUUEsRUFDUkMsTUFBU0EsR0FFYlgsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ1JBLEVBQWEsS0FBM0IsSUFDSVcsRUFBVXpFLEVBQUUsWUFDWjBFLEVBQVcxRSxFQUFFLGFBQ2pCeUUsRUFBUUUsS0FBT0osRUFDZkcsRUFBU0MsS0FBT0gsU0FTcEN6RCxhQUFhQyxVQUFVa0MsSUFBTSxXQUNmckQsS0FDTHdFLGNBVVRyRSxFQUFFLFlBQ2UsSUFBSUosUUFDVnNELE9BRUssSUFBSXhDLE9BQ1Z3QyxPQUVhLElBQUluQyxjQUNWbUMiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g6Z2i5ZCR5a+56LGhXG5cbi8vIGZ1bmN0aW9uIEJhbm5lcigpIHtcbi8vICAgICBjb25zb2xlLmxvZygn5p6E6YCg5Ye95pWwJyk7XG4vLyAgICAgdGhpcy5wZXJzb24gPSAndXNlcjEnO1xuLy8gfVxuLy9cbi8vIEJhbm5lci5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbiAoKSB7XG4vLyAgICAgY29uc29sZS5sb2coJ2hlbGxvIHdvcmxkJyk7XG4vLyB9O1xuLy9cbi8vIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XG4vLyBjb25zb2xlLmxvZyhiYW5uZXIucGVyc29uKTtcbi8vIGJhbm5lci5ncmVldCgpO1xuXG5mdW5jdGlvbiBCYW5uZXIoKSB7XG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDEzMjA7XG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xuICAgIHRoaXMuaW5kZXggPSAxO1xuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0LWFycm93XCIpO1xuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xufVxuXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksJ2xlZnQnOi1zZWxmLmJhbm5lcldpZHRofSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yKHZhciBpPTA7IGk8c2VsZi5iYW5uZXJDb3VudDsgaSsrKXtcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XG4gICAgICAgIGlmKGkgPT09IDApe1xuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJDb3VudCoxMis4KjIrMTYqKHNlbGYuYmFubmVyQ291bnQtMSl9KTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmKGlzU2hvdyl7XG4gICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcbiAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcbiAgICB9ZWxzZXtcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuaGlkZSgpO1xuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xuICAgIH1cbn07XG5cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6LTEzMjAqc2VsZi5pbmRleH0sNTAwKTtcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xuICAgIGlmKGluZGV4ID09PSAwKXtcbiAgICAgICAgaW5kZXggPSBzZWxmLmJhbm5lckNvdW50LTE7XG4gICAgfWVsc2UgaWYoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQrMSl7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICB9ZWxzZXtcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcbiAgICB9XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCsxKXtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0sMjAwMCk7XG59O1xuXG5cbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKXtcbiAgICAgICAgICAgIC8vID0977yaMSA9PSAnMSfvvJp0cnVlXG4gICAgICAgICAgICAvLyA9PT09IDEgIT0gJzEnXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyQ291bnQqc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KTtcblxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKXtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsOaYr++8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xuICAgIH0sZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyDnrKzkuozkuKrlh73mlbDmmK/vvIzmiorpvKDmoIfku45iYW5uZXLkuIrnp7votbDkvJrmiafooYznmoTlh73mlbBcbiAgICAgICAgc2VsZi5sb29wKCk7XG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xuICAgIH0pO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coXCJzc3NcIik7XG4gICAgdGhpcy5pbml0QmFubmVyKCk7XG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcbiAgICB0aGlzLmxvb3AoKTtcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xufTtcblxuLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubmF2LXRvcFwiKTtcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XG4gICAgICAgIHZhciBwYWdlID0gMTtcbiAgICAgICAgc2hvcHBpbmd3ZWJfYWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvcHJvZHVjdC9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzZXMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwicHJvZHVjdHMtaXRlbVwiLHtcInByb2R1Y3RzZXNcIjpwcm9kdWN0c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIiNwcm9kdWN0LWxpc3RcIik7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBsb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzaG9wcGluZ3dlYl9hamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9wcm9kdWN0L2xpc3QvJyxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHNlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICBpZihwcm9kdWN0c2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwicHJvZHVjdHMtaXRlbVwiLHtcInByb2R1Y3RzZXNcIjpwcm9kdWN0c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiI3Byb2R1Y3QtbGlzdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEJ0bi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuXG5cbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xufTtcblxuZnVuY3Rpb24gSW5kZXgoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFnZSA9IDI7XG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XG4gICAgc2VsZi5sb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xuXG59XG5cbi8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cblxuU2hvcHBpbmdjYXJ0LnByb3RvdHlwZS5hZGRQcm9kdWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhZGRCdG4gPSAkKFwiI2FkZC1pdGVtLWJ0blwiKTtcbiAgICB2YXIgbmFtZSA9ICQoXCIucHJvZHVjdC1uYW1lXCIpO1xuICAgIHZhciBwcmljZSA9ICQoXCIucHJpY2VcIik7XG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2hvcHBpbmd3ZWJfYWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvcHJvZHVjdC9zaG9wcGluZ2NhcnRfbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ25hbWUnOiBuYW1lLFxuICAgICAgICAgICAgICAgICdwcmljZSc6IHByaWNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcF9uYW1lID0gJChcIi5zcC1uYW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3BfcHJpY2UgPSAkKFwiLnNwLXByaWNlXCIpO1xuICAgICAgICAgICAgICAgICAgICBzcF9uYW1lLnRleHQgPSBuYW1lXG4gICAgICAgICAgICAgICAgICAgIHNwX3ByaWNlLnRleHQgPSBwcmljZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5cblxuU2hvcHBpbmdjYXJ0LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgc2VsZi5hZGRQcm9kdWN0KCk7XG59O1xuXG5cbmZ1bmN0aW9uIFNob3BwaW5nY2FydCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG59XG5cblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuICAgIGJhbm5lci5ydW4oKTtcblxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xuICAgIGluZGV4LnJ1bigpO1xuXG4gICAgdmFyIHNob3BwaW5nY2FydCA9IG5ldyBTaG9wcGluZ2NhcnQoKTtcbiAgICBzaG9wcGluZ2NhcnQucnVuKCk7XG59KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIl19

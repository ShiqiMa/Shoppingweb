function Products(){}Products.prototype.run=function(){this.listenUploadFileEvent(),this.listenSubmitEvent()},$(function(){(new Products).run()}),Products.prototype.listenUploadFileEvent=function(){var e=$("#thumbnail-btn");e.change(function(){var t=e[0].files[0],n=new FormData;n.append("file",t),shoppingweb_ajax.post({url:"/admin/upload_file/",data:n,processData:!1,contentType:!1,success:function(t){if(200===t.code){var n=t.data.url;$("#thumbnail-form").val(n)}}})})},Products.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var n=$(this).attr("data-news-id"),e=$("input[name='title']").val(),a=$("select[name='category']").val(),i=$("textarea[name='desc']").val(),o=$("input[name='thumbnail']").val(),c=$("input[name='price']").val(),u="";u=n?"/admin/edit_products/":"/admin/write_products/",shoppingweb_ajax.post({url:u,data:{name:e,category:a,desc:i,thumbnail:o,price:c,pk:n},success:function(t){200===t.code&&shoppingweb_alert.alertSuccess("恭喜！商品发表成功！",function(){window.location.reload()})}})})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX3Byb2R1Y3RzLmpzIl0sIm5hbWVzIjpbIlByb2R1Y3RzIiwicHJvdG90eXBlIiwicnVuIiwidGhpcyIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsImxpc3RlblN1Ym1pdEV2ZW50IiwiJCIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJzaG9wcGluZ3dlYl9hamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwiYXR0ciIsIm5hbWUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJwcmljZSIsInNob3BwaW5nd2ViX2FsZXJ0IiwiYWxlcnRTdWNjZXNzIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFlBSVRBLFNBQVNDLFVBQVVDLElBQU0sV0FDWEMsS0FDTEMsd0JBREtELEtBRUxFLHFCQUlUQyxFQUFFLFlBQ2lCLElBQUlOLFVBQ1ZFLFFBSWJGLFNBQVNDLFVBQVVHLHNCQUF3QixXQUN2QyxJQUFJRyxFQUFZRCxFQUFFLGtCQUNsQkMsRUFBVUMsT0FBTyxXQUNiLElBQUlDLEVBQU9GLEVBQVUsR0FBR0csTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkssaUJBQWlCQyxLQUFLLENBQ2xCQyxJQUFPLHNCQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUZixFQUFFLG1CQUNSZ0IsSUFBSU4sVUFVdkNoQixTQUFTQyxVQUFVSSxrQkFBb0IsV0FDbkJDLEVBQUUsZUFDUmlCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE1wQixFQUFFSCxNQUNDd0IsS0FBSyxnQkFFZEMsRUFBT3RCLEVBQUUsdUJBQXVCZ0IsTUFDaENPLEVBQVd2QixFQUFFLDJCQUEyQmdCLE1BQ3hDUSxFQUFPeEIsRUFBRSx5QkFBeUJnQixNQUNsQ1MsRUFBWXpCLEVBQUUsMkJBQTJCZ0IsTUFDekNVLEVBQVExQixFQUFFLHVCQUF1QmdCLE1BRWpDTixFQUFNLEdBRU5BLEVBRERVLEVBQ08sd0JBRUEseUJBR1ZaLGlCQUFpQkMsS0FBSyxDQUNsQkMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKVyxLQUFRQSxFQUNSQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxNQUFTQSxFQUNUTixHQUFNQSxHQUVWTixRQUFXLFNBQVVDLEdBQ0ssTUFBbkJBLEVBQWEsTUFDWlksa0JBQWtCQyxhQUFhLGFBQWMsV0FDekNDLE9BQU9DLFNBQVNDIiwiZmlsZSI6IndyaXRlX3Byb2R1Y3RzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIFByb2R1Y3RzKCkge1xuXG59XG5cblByb2R1Y3RzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XG59O1xuXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBwcm9kdWN0cyA9IG5ldyBQcm9kdWN0cygpO1xuICAgIHByb2R1Y3RzLnJ1bigpO1xufSk7XG5cblxuUHJvZHVjdHMucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXBsb2FkQnRuID0gJChcIiN0aHVtYm5haWwtYnRuXCIpO1xuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICBzaG9wcGluZ3dlYl9hamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvYWRtaW4vdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcbn07XG5cblxuXG5Qcm9kdWN0cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoXCIjc3VibWl0LWJ0blwiKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xuICAgICAgICB2YXIgcGsgPSBidG4uYXR0cignZGF0YS1uZXdzLWlkJyk7XG5cbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgZGVzYyA9ICQoXCJ0ZXh0YXJlYVtuYW1lPSdkZXNjJ11cIikudmFsKCk7XG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XG4gICAgICAgIHZhciBwcmljZSA9ICQoXCJpbnB1dFtuYW1lPSdwcmljZSddXCIpLnZhbCgpO1xuXG4gICAgICAgIHZhciB1cmwgPSAnJztcbiAgICAgICAgaWYocGspe1xuICAgICAgICAgICAgdXJsID0gJy9hZG1pbi9lZGl0X3Byb2R1Y3RzLyc7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdXJsID0gJy9hZG1pbi93cml0ZV9wcm9kdWN0cy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvcHBpbmd3ZWJfYWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnbmFtZSc6IG5hbWUsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzogY2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXG4gICAgICAgICAgICAgICAgJ3ByaWNlJzogcHJpY2UsXG4gICAgICAgICAgICAgICAgJ3BrJzogcGtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgc2hvcHBpbmd3ZWJfYWxlcnQuYWxlcnRTdWNjZXNzKCfmga3llpzvvIHllYblk4Hlj5HooajmiJDlip/vvIEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIl19

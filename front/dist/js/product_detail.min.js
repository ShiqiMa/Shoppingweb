function Index(){var t=this;t.page=2,t.category_id=0,t.loadBtn=$("#load-more-btn")}Index.prototype.listenCategorySwitchEvent=function(){var c=this;$(".nav-top").children().click(function(){var n=$(this),i=n.attr("data-category");shoppingweb_ajax.get({url:"/product/list/",data:{category_id:i,p:1},success:function(t){if(200===t.code){var e=t.data,a=template("products-item",{productses:e}),o=$("#product-list");o.empty(),o.append(a),c.page=2,c.category_id=i,n.addClass("active").siblings().removeClass("active"),c.loadBtn.show()}}})})},Index.prototype.listenLoadMoreEvent=function(){var o=this,n=$("#load-more-btn");n.click(function(){shoppingweb_ajax.get({url:"/product/list/",data:{p:o.page,category_id:o.category_id},success:function(t){if(200===t.code){var e=t.data;if(0<e.length){var a=template("products-item",{productses:e});$("#product-list").append(a),o.page+=1}else n.hide()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3RfZGV0YWlsLmpzIl0sIm5hbWVzIjpbIkluZGV4Iiwic2VsZiIsInRoaXMiLCJwYWdlIiwiY2F0ZWdvcnlfaWQiLCJsb2FkQnRuIiwiJCIsInByb3RvdHlwZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJjaGlsZHJlbiIsImNsaWNrIiwibGkiLCJhdHRyIiwic2hvcHBpbmd3ZWJfYWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsInByb2R1Y3RzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSIsImFwcGVuZCIsImFkZENsYXNzIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInNob3ciLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwibGVuZ3RoIiwiaGlkZSIsInJ1biJdLCJtYXBwaW5ncyI6IkFBa0VBLFNBQVNBLFFBQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsS0FBTyxFQUNaRixFQUFLRyxZQUFjLEVBQ25CSCxFQUFLSSxRQUFVQyxFQUFFLGtCQXRFckJOLE1BQU1PLFVBQVVDLDBCQUE0QixXQUN4QyxJQUFJUCxFQUFPQyxLQUNJSSxFQUFFLFlBQ1JHLFdBQVdDLE1BQU0sV0FDdEIsSUFBSUMsRUFBS0wsRUFBRUosTUFDUEUsRUFBY08sRUFBR0MsS0FBSyxpQkFFMUJDLGlCQUFpQkMsSUFBSSxDQUNqQkMsSUFBTyxpQkFDUEMsS0FBUSxDQUNKWixZQUFlQSxFQUNmYSxFQUxHLEdBT1BDLFFBQVcsU0FBVUMsR0FDakIsR0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFhRCxFQUFhLEtBQzFCRSxFQUFNQyxTQUFTLGdCQUFnQixDQUFDRixXQUFhQSxJQUM3Q0csRUFBZ0JqQixFQUFFLGlCQUN0QmlCLEVBQWNDLFFBQ2RELEVBQWNFLE9BQU9KLEdBQ3JCcEIsRUFBS0UsS0FBTyxFQUNaRixFQUFLRyxZQUFjQSxFQUNuQk8sRUFBR2UsU0FBUyxVQUFVQyxXQUFXQyxZQUFZLFVBQzdDM0IsRUFBS0ksUUFBUXdCLGNBUWpDN0IsTUFBTU8sVUFBVXVCLG9CQUFzQixXQUNsQyxJQUFJN0IsRUFBT0MsS0FDUEcsRUFBVUMsRUFBRSxrQkFDaEJELEVBQVFLLE1BQU0sV0FDVkcsaUJBQWlCQyxJQUFJLENBQ2pCQyxJQUFPLGlCQUNQQyxLQUFPLENBQ0hDLEVBQUtoQixFQUFLRSxLQUNWQyxZQUFlSCxFQUFLRyxhQUV4QmMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQWFELEVBQWEsS0FDOUIsR0FBdUIsRUFBcEJDLEVBQVdXLE9BQVcsQ0FDckIsSUFBSVYsRUFBTUMsU0FBUyxnQkFBZ0IsQ0FBQ0YsV0FBYUEsSUFDeENkLEVBQUUsaUJBQ1JtQixPQUFPSixHQUNWcEIsRUFBS0UsTUFBUSxPQUViRSxFQUFRMkIsY0FVaENoQyxNQUFNTyxVQUFVMEIsSUFBTSxXQUNQL0IsS0FDTjRCLHNCQURNNUIsS0FFTk0sNkJBWVRGLEVBQUUsWUFDYyxJQUFJTixPQUNWaUMiLCJmaWxlIjoicHJvZHVjdF9kZXRhaWwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubmF2LXRvcFwiKTtcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XG4gICAgICAgIHZhciBwYWdlID0gMTtcbiAgICAgICAgc2hvcHBpbmd3ZWJfYWpheC5nZXQoe1xuICAgICAgICAgICAgJ3VybCc6ICcvcHJvZHVjdC9saXN0LycsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcbiAgICAgICAgICAgICAgICAncCc6IHBhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzZXMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwicHJvZHVjdHMtaXRlbVwiLHtcInByb2R1Y3RzZXNcIjpwcm9kdWN0c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIiNwcm9kdWN0LWxpc3RcIik7XG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBsb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzaG9wcGluZ3dlYl9hamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9wcm9kdWN0L2xpc3QvJyxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHNlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICBpZihwcm9kdWN0c2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwicHJvZHVjdHMtaXRlbVwiLHtcInByb2R1Y3RzZXNcIjpwcm9kdWN0c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiI3Byb2R1Y3QtbGlzdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEJ0bi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuXG5cbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xufTtcblxuZnVuY3Rpb24gSW5kZXgoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYucGFnZSA9IDI7XG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XG4gICAgc2VsZi5sb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xuXG59XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XG4gICAgaW5kZXgucnVuKCk7XG59KTsiXX0=
